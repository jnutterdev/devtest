I"h<p>While in the process of updating the new website, I came across an issue building the links for my website. To rewind a bit, I previously used Jekyll on version 3.3.0 or even earlier. Sometime between now and then, there was a new update that rolled out that started using Bundler to bundle the gem dependencies for the project. 
<!--more--></p>

<p>I read through the documentation and noticed that when using the build command, this will build the site for a local development environment. This part I understood, somewhat. But I didn‚Äôt realize what that meant exactly. When I started building my site links, I notice that any URLs that I had set a variable on with <code class="highlighter-rouge">absolute_url</code> would get written to the site as <code class="highlighter-rouge">localhost:4000</code>. I found this strange because I was using <code class="highlighter-rouge">bundle exec jekyll serve</code> each time, and it gave me <code class="highlighter-rouge">127.0.0.1:4000</code> as the server where my site was hosted. While it is technically the same as <code class="highlighter-rouge">localhost:4000</code>, I could not for the life of me figure out why and where it was getting rendered as localhost.</p>

<p>I looked in my <code class="highlighter-rouge">_config.yml</code> file and set the <code class="highlighter-rouge">url:</code> to <code class="highlighter-rouge">https://www.jnutterdev.com</code>, and then made sure my <code class="highlighter-rouge">baseurl:</code> config was empty. I looked through every freaking file I could think of and still could not figure out how my URLs were getting written as localhost. I was debating removing the <code class="highlighter-rouge">absolute_url</code> variable, and then use static links instead, but that wasn‚Äôt really great because there were a lot of links that relied on <code class="highlighter-rouge">absolute_url</code>.</p>

<p>I scoured stack overflow and even the Jekyll community forum for answers, and no one mentioned anything related. Until finally, I saw that someone mentioned needing to pass a production variable when using bundle exec, BUT this person placed the variable after the bundle exec command, and resulted in an error for me. I was getting closer, I knew it. Eventually, I looked through Jekyll‚Äôs documentation again and found the environment variable:</p>

<p><code class="highlighter-rouge">JEKYLL_ENV="production" bundle exec jekyll b</code></p>

<p>This command used the environment variables at the <em>beginning</em> of the command. After building the new production site, I then used scp to copy the <code class="highlighter-rouge">_site</code> folder to my server, and hey presto, it finally worked!</p>

<p>All this time, I was missing one key detail. <code class="highlighter-rouge">JEKYLL_ENV="production"</code>. The documentation said that you should run this command. But nowhere did it say, ‚ÄúRUN THIS COMMAND IF YOU WANT YOUR ABSOLUTE URLS WRITTEN WITH YOUR SITE URL.‚Äù Jeebus. What a relief. I wish things would be a little more clearer sometimes. That‚Äôs the part of learning new technology I guess.</p>

<p>It dawned on me later that this is also the reason why another site of mine could never fully work as I wanted it to. I spent a week trying to get a site up, but eventually gave up on it since I could never figure out why my links weren‚Äôt working. I went back to my old site, re-cloned the repo, updated all the gem dependencies, ran the environment variable on build and what do you know‚Ä¶ this worked! I feel so accomplished. It‚Äôs the little wins, right? I‚Äôm only operating on five hours of sleep because of this one little thing. Haha.</p>
:ET